class n{config;observer=null;criticalResources=new Set;loadedResources=new Set;constructor(e={}){this.config={enableResourceHints:!0,enableLazyLoading:!0,enablePreloading:!0,enableCriticalCSS:!0,enableServiceWorker:!0,...e}}init(){typeof window>"u"||(this.config.enableResourceHints&&this.addResourceHints(),this.config.enableLazyLoading&&this.setupLazyLoading(),this.config.enablePreloading&&this.preloadCriticalResources(),this.config.enableServiceWorker&&this.registerServiceWorker(),this.setupPerformanceMonitoring())}addResourceHints(){[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"preconnect",href:"https://api.github.com"},{rel:"dns-prefetch",href:"https://www.linkedin.com"},{rel:"dns-prefetch",href:"https://github.com"},{rel:"preload",href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap",as:"style"}].forEach(r=>this.addResourceHint(r))}addResourceHint(e){const r=document.createElement("link");r.rel=e.rel,r.href=e.href,e.as&&r.setAttribute("as",e.as),e.type&&(r.type=e.type),e.crossorigin&&(r.crossOrigin=e.crossorigin),document.head.appendChild(r)}setupLazyLoading(){this.observer=new IntersectionObserver(e=>{e.forEach(r=>{if(r.isIntersecting){const s=r.target;this.loadResource(s),this.observer?.unobserve(s)}})},{rootMargin:"50px 0px",threshold:.01}),document.querySelectorAll("[data-lazy]").forEach(e=>{this.observer?.observe(e)})}loadResource(e){const r=e.getAttribute("data-src"),s=e.getAttribute("data-srcset");if(e.tagName==="IMG"){const o=e;r&&(o.src=r),s&&(o.srcset=s)}e.removeAttribute("data-lazy"),e.classList.add("loaded")}preloadCriticalResources(){[{href:"/fonts/inter-var.woff2",as:"font",type:"font/woff2"},{href:"/assets/hero-background.webp",as:"image"}].forEach(r=>{this.loadedResources.has(r.href)||(this.preloadResource(r),this.loadedResources.add(r.href))})}preloadResource(e){const r=document.createElement("link");r.rel="preload",r.href=e.href,r.as=e.as,e.type&&(r.type=e.type),e.as==="font"&&(r.crossOrigin="anonymous"),document.head.appendChild(r)}async registerServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}catch(e){console.log("Service Worker registration failed:",e)}}setupPerformanceMonitoring(){this.monitorCoreWebVitals(),this.monitorResourceLoading(),this.monitorLongTasks()}monitorCoreWebVitals(){this.observePerformanceEntry("largest-contentful-paint",r=>{const s=r.startTime;console.log("LCP:",s,"ms"),s>2500&&console.warn("LCP is slower than recommended (>2.5s)")}),this.observePerformanceEntry("first-input",r=>{const s=r.processingStart-r.startTime;console.log("FID:",s,"ms"),s>100&&console.warn("FID is slower than recommended (>100ms)")});let e=0;this.observePerformanceEntry("layout-shift",r=>{r.hadRecentInput||(e+=r.value)}),setInterval(()=>{e>.1&&console.warn("CLS is higher than recommended (>0.1):",e)},5e3)}monitorResourceLoading(){this.observePerformanceEntry("resource",e=>{const r=e,s=r.responseEnd-r.startTime;s>1e3&&console.warn("Slow resource:",r.name,s,"ms")})}monitorLongTasks(){if("PerformanceObserver"in window)try{new PerformanceObserver(r=>{r.getEntries().forEach(s=>{s.duration>50&&console.warn("Long task detected:",s.duration,"ms")})}).observe({entryTypes:["longtask"]})}catch{console.log("Long task monitoring not supported")}}observePerformanceEntry(e,r){if("PerformanceObserver"in window)try{new PerformanceObserver(o=>{o.getEntries().forEach(r)}).observe({entryTypes:[e]})}catch{console.log(`Performance observer for ${e} not supported`)}}optimizeImages(){document.querySelectorAll("img[data-optimize]").forEach(r=>{const s=r,o=s.src;if(this.supportsWebP()){const t=o.replace(/\.(jpg|jpeg|png)$/,".webp");s.src=t}s.loading="lazy",!s.srcset&&s.dataset.srcset&&(s.srcset=s.dataset.srcset)})}supportsWebP(){const e=document.createElement("canvas");return e.width=1,e.height=1,e.toDataURL("image/webp").startsWith("data:image/webp")}cleanup(){this.observer&&(this.observer.disconnect(),this.observer=null)}}export{n as default};
